{% extends 'blog/base.html' %}
{% load widget_tweaks %}
{% load static %}

{% block title %}{% if form.instance.pk %}Edit Post{% else %}New Post{% endif %}{% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'blog/css/post_form.css' %}">
<script src="{% static 'blog/js/post_form.js' %}"></script>
{% endblock %}
{% block extra_head %}
  {{ form.media }}
  <!-- Summernote CSS and JS -->
  <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
  
  <!-- jQuery and Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <style>
    .cke_autocomplete_panel p:hover {
      background-color: #f0f0f0;
    }
  </style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h2 class="mb-4 text-center">{% if form.instance.pk %}블로그 수정{% else %}블로그 생성{% endif %}</h2>
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="mb-4">
                            <label for="{{ form.title.id_for_label }}" class="form-label">제목</label>
                            <div class="input-group">
                                {% render_field form.title class="form-control" placeholder="Enter your post title" %}
                                <button type="button" id="suggest-title" class="btn btn-outline-secondary">제목 제안받기</button>
                            </div>
                            <div id="suggested-title" class="mt-2 alert alert-info" style="display: none;">
                                <p id="suggested-title-text"></p>
                                <button type="button" id="use-suggested-title" class="btn btn-sm btn-primary">사용하기</button>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
                            {% render_field form.category class="form-select" %}
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.content.id_for_label }}" class="form-label">본문</label>
                            {{ form.content }}
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.tags.id_for_label }}" class="form-label">Tags</label>
                            {% render_field form.tags class="form-control" %}
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.head_image.id_for_label }}" class="form-label">썸네일</label>
                            {% render_field form.head_image class="form-control" %}
                        </div>
                        {% if form.birthday %}
                        <div class="mb-4">
                            <label for="{{ form.birthday.id_for_label }}" class="form-label">Birthday</label>
                            {% render_field form.birthday class="form-control" type="date" %}
                        </div>
                        {% endif %}
                        {% if form.location %}
                        <div class="mb-4">
                            <label for="{{ form.location.id_for_label }}" class="form-label">Location</label>
                            {{ form.location }}
                        </div>
                        {% endif %}
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">{% if form.instance.pk %}Update{% else %}Share{% endif %}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

