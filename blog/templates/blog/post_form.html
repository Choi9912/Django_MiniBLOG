{% extends 'blog/base.html' %}
{% load widget_tweaks %}
{% load static %}

{% block title %}{% if form.instance.pk %}Edit Post{% else %}New Post{% endif %}{% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'blog/css/post_form.css' %}">
<script src="{% static 'blog/js/post_form.js' %}"></script>

{% endblock %}
{% block extra_head %}
  {{ form.media }}
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
  <script src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>
  {% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
          <h2 class="mb-4 text-center">{% if form.instance.pk %}Edit Post{% else %}New Post{% endif %}</h2>
          
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="mb-4">
              <label for="{{ form.title.id_for_label }}">Title</label>
              {% render_field form.title class="form-control" placeholder="Enter your post title" %}
            </div>
            
            <div class="mb-4">
              <label for="{{ form.category.id_for_label }}">Category</label>
              {% render_field form.category class="form-select" %}
            </div>
            
            <div class="mb-4">
              <label for="{{ form.content.id_for_label }}">Content</label>
              {{ form.content }}
            </div>
            
            <div class="mb-4">
              <label for="{{ form.tags.id_for_label }}">Tags</label>
              {% render_field form.tags class="form-control" %}
            </div>
            
            <div class="mb-4">
              <label for="{{ form.head_image.id_for_label }}">Header Image</label>
              {% render_field form.head_image class="form-control" %}
            </div>
            
            <div class="mb-4">
              <label for="{{ form.file_upload.id_for_label }}">Attach File</label>
              {% render_field form.file_upload class="form-control" %}
            </div>
            
            {% if form.birthday %}
            <div class="mb-4">
              <label for="{{ form.birthday.id_for_label }}">Birthday</label>
              {% render_field form.birthday class="form-control" type="date" %}
            </div>
            {% endif %}
            
            {% if form.location %}
            <div class="mb-4">
              <label for="{{ form.content.id_for_label }}">Content</label>
              {{ form.content }}
            </div>
            {% endif %}
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}Update{% else %}Share{% endif %}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}